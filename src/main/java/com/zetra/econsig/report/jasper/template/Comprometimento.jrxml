<!-- Created with Jaspersoft Studio version 7.0.1.final using JasperReports Library version 7.0.1-573496633c2b4074e32f433154b543003f7d2498  -->
<jasperReport name="Comprometimento" language="java" pageWidth="595" pageHeight="842" whenNoDataType="AllSectionsNoDetail" columnWidth="535" leftMargin="30" rightMargin="30" topMargin="20" bottomMargin="20" uuid="ad9ade6f-f51b-409c-a950-0020913c1c9a">
	<property name="ireport.scriptlethandling" value="0"/>
	<property name="ireport.encoding" value="ISO-8859-1"/>
	<property name="ireport.zoom" value="1.5"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<import>net.sf.jasperreports.engine.*</import>
	<import>java.util.*</import>
	<import>net.sf.jasperreports.engine.data.*</import>
	<style name="Celula">
		<box padding="0" leftPadding="2" rightPadding="2"/>
	</style>
	<parameter name="CAMINHO_LOGO" forPrompting="false" class="java.lang.String"/>
	<parameter name="SUBTITULO" forPrompting="false" class="java.lang.String">
		<description><![CDATA[Subtitulo do relatÃƒÂ³rio]]></description>
	</parameter>
	<parameter name="TEXTO_RODAPE" forPrompting="false" class="java.lang.String">
		<description><![CDATA[Nome do Gestor(Consignante)]]></description>
	</parameter>
	<parameter name="TITULO" forPrompting="false" class="java.lang.String">
		<description><![CDATA[Titulo do relatorio]]></description>
	</parameter>
	<parameter name="RESPONSAVEL" class="com.zetra.econsig.helper.seguranca.AcessoSistema"/>
	<query language="sql"><![CDATA[SELECT DISTINCT tb_usuario.usu_codigo,tb_usuario.usu_login,tb_usuario.usu_nome,tb_usuario.stu_codigo,tb_usuario.usu_tipo_bloq,tb_perfil.per_codigo,tb_perfil.per_descricao,tb_usuario.usu_data_cad,tb_usuario.usu_data_exp_senha,IF(tb_usuario.usu_codigo = tb_usuario_cse.usu_codigo, 'CSE', (IF(tb_usuario.usu_codigo = tb_usuario_csa.usu_codigo, 'CSA', (IF(tb_usuario.usu_codigo = tb_usuario_cor.usu_codigo, 'COR', 'ORG'))))) AS TIPO,IF(tb_usuario.usu_codigo = tb_usuario_cse.usu_codigo, tb_consignante.cse_nome, (IF(tb_usuario.usu_codigo = tb_usuario_csa.usu_codigo, tb_consignataria.csa_nome, (IF(tb_usuario.usu_codigo = tb_usuario_cor.usu_codigo, CONCAT(CONCAT(CSA_COR.csa_nome,  ' - '  ), tb_correspondente.cor_nome), tb_orgao.org_nome))))) AS ENTIDADE FROM tb_usuario LEFT OUTER JOIN tb_usuario_cse ON (tb_usuario.usu_codigo = tb_usuario_cse.usu_codigo) LEFT OUTER JOIN tb_consignante ON (tb_usuario_cse.cse_codigo = tb_consignante.cse_codigo) LEFT OUTER JOIN tb_usuario_csa ON (tb_usuario.usu_codigo = tb_usuario_csa.usu_codigo) LEFT OUTER JOIN tb_consignataria ON (tb_usuario_csa.csa_codigo = tb_consignataria.csa_codigo) LEFT OUTER JOIN tb_usuario_cor ON (tb_usuario.usu_codigo = tb_usuario_cor.usu_codigo) LEFT OUTER JOIN tb_correspondente ON (tb_usuario_cor.cor_codigo = tb_correspondente.cor_codigo) LEFT OUTER JOIN tb_consignataria CSA_COR ON (tb_correspondente.csa_codigo = CSA_COR.csa_codigo) LEFT OUTER JOIN tb_usuario_org ON (tb_usuario.usu_codigo = tb_usuario_org.usu_codigo) LEFT OUTER JOIN tb_orgao ON (tb_usuario_org.org_codigo = tb_orgao.org_codigo) LEFT OUTER JOIN tb_perfil_usuario ON (tb_perfil_usuario.usu_codigo = tb_usuario.usu_codigo) LEFT OUTER JOIN tb_perfil ON (tb_perfil.per_codigo = tb_perfil_usuario.per_codigo) WHERE (tb_usuario.usu_codigo = tb_usuario_cse.usu_codigo OR tb_usuario.usu_codigo = tb_usuario_csa.usu_codigo OR tb_usuario.usu_codigo = tb_usuario_cor.usu_codigo OR tb_usuario.usu_codigo = tb_usuario_org.usu_codigo) AND ( tb_usuario_org.usu_codigo = tb_usuario.usu_codigo OR  tb_usuario_cse.usu_codigo = tb_usuario.usu_codigo OR  tb_usuario_csa.usu_codigo = tb_usuario.usu_codigo OR  tb_usuario_cor.usu_codigo = tb_usuario.usu_codigo )  AND tb_usuario.stu_codigo IN ( 1,2 ) ORDER BY  TIPO, tb_usuario.usu_nome]]></query>
	<field name="FAIXA" class="java.lang.String"/>
	<field name="QTDE" class="java.math.BigDecimal"/>
	<field name="PERCENTUAL" class="java.math.BigDecimal"/>
	<variable name="BACKGROUND" resetType="None" calculation="DistinctCount" class="java.lang.Integer">
		<expression><![CDATA[$F{FAIXA}]]></expression>
		<initialValueExpression><![CDATA[new java.lang.Integer(0)]]></initialValueExpression>
	</variable>
	<background splitType="Stretch"/>
	<title splitType="Stretch"/>
	<pageHeader height="88" splitType="Stretch">
		<element kind="image" uuid="74388136-e499-49cb-bd92-37535377b3d5" key="image-1" x="2" y="1" width="63" height="20" onErrorType="Blank" usingCache="true" lazy="true">
			<expression><![CDATA[$P{CAMINHO_LOGO}]]></expression>
			<box>
				<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				<bottomPen lineWidth="0.0" lineColor="#000000"/>
				<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
			</box>
		</element>
		<element kind="textField" uuid="40b9b51a-8299-4916-a185-3d0cb8758196" key="textField-1" stretchType="ContainerHeight" x="68" y="15" width="467" height="73" textAdjust="StretchHeight" evaluationTime="Report" pattern="" blankWhenNull="false" hTextAlign="Left">
			<expression><![CDATA[$P{SUBTITULO}]]></expression>
			<box>
				<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				<bottomPen lineWidth="0.0" lineColor="#000000"/>
				<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
			</box>
		</element>
		<element kind="textField" uuid="0dd12f33-66be-433f-bbf6-49ac5bb967a7" key="textField-2" x="68" y="1" width="467" height="13" fontName="Arial" evaluationTime="Report" pattern="" blankWhenNull="false" bold="true" hTextAlign="Left">
			<expression><![CDATA[$P{TITULO}]]></expression>
			<box>
				<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				<bottomPen lineWidth="0.0" lineColor="#000000"/>
				<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
			</box>
		</element>
	</pageHeader>
	<columnHeader height="17" splitType="Stretch">
		<element kind="textField" uuid="ac272de1-9e68-4ca8-ade0-3cd83de0a5fa" key="staticText-16" mode="Opaque" x="281" y="0" width="83" height="17" backcolor="#CCCCCC" markup="none" fontName="Arial" bold="true" hTextAlign="Center" vTextAlign="Middle">
			<expression><![CDATA[com.zetra.econsig.helper.texto.ApplicationResourcesHelper.getMessage("rotulo.relatorio.comprometimento.percentual", $P{RESPONSAVEL})]]></expression>
			<box>
				<topPen lineWidth="0.25"/>
				<bottomPen lineWidth="0.25"/>
				<rightPen lineWidth="0.25"/>
			</box>
		</element>
		<element kind="textField" uuid="52a719d4-df85-4df6-8a0a-c251318c553a" key="staticText-15" mode="Opaque" x="157" y="0" width="124" height="17" backcolor="#CCCCCC" markup="none" fontName="Arial" bold="true" hTextAlign="Center" vTextAlign="Middle">
			<expression><![CDATA[com.zetra.econsig.helper.texto.ApplicationResourcesHelper.getMessage("rotulo.relatorio.comprometimento.quantidade", $P{RESPONSAVEL})]]></expression>
			<box>
				<topPen lineWidth="0.25"/>
				<bottomPen lineWidth="0.25"/>
				<rightPen lineWidth="0.25"/>
			</box>
		</element>
		<element kind="textField" uuid="0aa97789-e8cd-47ed-96a6-b85e6a1bddbc" key="staticText-14" mode="Opaque" x="65" y="0" width="92" height="17" backcolor="#CCCCCC" markup="none" fontName="Arial" bold="true" hTextAlign="Center" vTextAlign="Middle">
			<expression><![CDATA[com.zetra.econsig.helper.texto.ApplicationResourcesHelper.getMessage("rotulo.relatorio.comprometimento.faixa", $P{RESPONSAVEL})]]></expression>
			<box>
				<topPen lineWidth="0.25"/>
				<leftPen lineWidth="0.25"/>
				<bottomPen lineWidth="0.25"/>
				<rightPen lineWidth="0.25"/>
			</box>
		</element>
	</columnHeader>
	<detail>
		<band height="13" splitType="Stretch">
			<element kind="staticText" uuid="191ced6f-35a5-4cec-823c-9b511afbf508" key="fundoLinha" mode="Opaque" x="65" y="0" width="299" height="13" backcolor="#DDDDDD">
				<printWhenExpression><![CDATA[new java.lang.Boolean(($V{BACKGROUND}.intValue() % 2)==0)]]></printWhenExpression>
				<text><![CDATA[ ]]></text>
				<box>
					<topPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
			</element>
			<element kind="elementGroup">
				<element kind="textField" uuid="d91a3bab-2300-44b4-b400-82a9933bbd7e" key="textField" x="65" y="0" width="92" height="13" fontSize="9.0" blankWhenNull="true" hTextAlign="Center" vTextAlign="Bottom" style="Celula">
					<paragraph lineSpacing="Single"/>
					<expression><![CDATA[$F{FAIXA}]]></expression>
					<box style="Celula">
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
						<rightPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
					</box>
				</element>
				<element kind="textField" uuid="f9328ad0-fb19-4ca3-a92e-1da789d8e871" key="textField" x="157" y="0" width="124" height="13" fontSize="9.0" pattern="###0" blankWhenNull="true" hTextAlign="Center" vTextAlign="Bottom" style="Celula">
					<expression><![CDATA[$F{QTDE}]]></expression>
					<box style="Celula">
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.25" lineColor="#000000"/>
						<rightPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
					</box>
				</element>
				<element kind="textField" uuid="285cc2ae-0917-42d4-989e-607187e59d64" key="textField" x="281" y="0" width="83" height="13" fontSize="9.0" pattern="#,##0.00" blankWhenNull="true" hTextAlign="Center" style="Celula">
					<expression><![CDATA[$F{PERCENTUAL}]]></expression>
					<box style="Celula">
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.25" lineColor="#000000"/>
						<rightPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
					</box>
				</element>
			</element>
		</band>
	</detail>
	<columnFooter splitType="Stretch"/>
	<pageFooter height="26" splitType="Stretch">
		<element kind="textField" uuid="5849ab77-d964-46d4-95a8-541b1e600050" key="textField" x="1" y="0" width="534" height="13" fontName="Times New Roman" fontSize="7.0" pattern="" blankWhenNull="true">
			<expression><![CDATA[$P{TEXTO_RODAPE}]]></expression>
			<box>
				<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				<bottomPen lineWidth="0.0" lineColor="#000000"/>
				<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
			</box>
		</element>
		<element kind="textField" uuid="ec7a2cb7-78e4-4f47-a7b5-f0e11bea0065" key="textField-3" x="424" y="13" width="60" height="13" blankWhenNull="false" hTextAlign="Right">
			<expression><![CDATA[com.zetra.econsig.helper.texto.ApplicationResourcesHelper.getMessage("rotulo.relatorio.pagina.de", $P{RESPONSAVEL}, $V{PAGE_NUMBER}.toString())]]></expression>
			<box>
				<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				<bottomPen lineWidth="0.0" lineColor="#000000"/>
				<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
			</box>
		</element>
		<element kind="textField" uuid="e6394327-34eb-4f3f-93ce-b5fd0f667f96" key="textField-4" x="490" y="13" width="45" height="13" evaluationTime="Report" blankWhenNull="false" hTextAlign="Left">
			<expression><![CDATA[$V{PAGE_NUMBER}]]></expression>
			<box>
				<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				<bottomPen lineWidth="0.0" lineColor="#000000"/>
				<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
			</box>
		</element>
	</pageFooter>
	<summary height="385" splitType="Stretch">
		<element kind="chart" chartType="bar3D" uuid="ba8b9b04-0a5b-478c-a1b7-2b18999afb1b" key="element-2" mode="Opaque" x="35" y="10" width="437" height="367" showLegend="false">
			<dataset kind="category">
				<series>
					<seriesExpression><![CDATA[$F{FAIXA}]]></seriesExpression>
					<categoryExpression><![CDATA[$F{FAIXA}]]></categoryExpression>
					<valueExpression><![CDATA[$F{PERCENTUAL}]]></valueExpression>
					<labelExpression><![CDATA[new String ($F{QTDE}.toString())]]></labelExpression>
				</series>
			</dataset>
			<plot orientation="Horizontal" showLabels="true">
				<itemLabel/>
			</plot>
			<box leftPadding="2" rightPadding="2"/>
		</element>
	</summary>
</jasperReport>
