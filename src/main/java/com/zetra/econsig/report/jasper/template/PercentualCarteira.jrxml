<!-- Created with Jaspersoft Studio version 7.0.1.final using JasperReports Library version 7.0.1-573496633c2b4074e32f433154b543003f7d2498  -->
<jasperReport name="Percentual Carteira" language="java" pageWidth="595" pageHeight="842" whenNoDataType="AllSectionsNoDetail" columnWidth="535" leftMargin="30" rightMargin="30" topMargin="20" bottomMargin="20" uuid="6ce580e4-b2ae-4173-b4b3-2e194c9f2b7c">
	<property name="ireport.scriptlethandling" value="0"/>
	<property name="ireport.encoding" value="ISO-8859-1"/>
	<property name="ireport.zoom" value="1.5"/>
	<property name="ireport.x" value="85"/>
	<property name="ireport.y" value="0"/>
	<import>net.sf.jasperreports.engine.*</import>
	<import>java.util.*</import>
	<import>net.sf.jasperreports.engine.data.*</import>
	<style name="Celula">
		<box padding="0" leftPadding="2" rightPadding="2"/>
	</style>
	<parameter name="CAMINHO_LOGO" forPrompting="false" class="java.lang.String"/>
	<parameter name="SUBTITULO" forPrompting="false" class="java.lang.String">
		<description><![CDATA[Subtitulo do relatÃ³rio]]></description>
	</parameter>
	<parameter name="TEXTO_RODAPE" forPrompting="false" class="java.lang.String">
		<description><![CDATA[Nome do Gestor(Consignante)]]></description>
	</parameter>
	<parameter name="TITULO" forPrompting="false" class="java.lang.String">
		<description><![CDATA[Titulo do relatorio]]></description>
	</parameter>
	<parameter name="PERC_CARTEIRA_TOTAL" forPrompting="false" class="java.util.List">
		<defaultValueExpression><![CDATA[new java.util.ArrayList()]]></defaultValueExpression>
	</parameter>
	<parameter name="PERC_CARTEIRA_QTDE" forPrompting="false" class="java.util.List">
		<defaultValueExpression><![CDATA[new java.util.ArrayList()]]></defaultValueExpression>
	</parameter>
	<parameter name="SUBREPORT_DIR" class="java.lang.String">
		<defaultValueExpression><![CDATA[".\\"]]></defaultValueExpression>
	</parameter>
	<parameter name="CSA_CODIGO" forPrompting="false" class="java.lang.String">
		<defaultValueExpression><![CDATA[new java.lang.String()]]></defaultValueExpression>
	</parameter>
	<parameter name="PERC_CARTEIRA_PARCELA" forPrompting="false" class="java.util.List">
		<defaultValueExpression><![CDATA[new java.util.ArrayList()]]></defaultValueExpression>
	</parameter>
	<parameter name="SUM_QTDE" forPrompting="false" class="java.math.BigDecimal"/>
	<parameter name="SUM_PARCELA" forPrompting="false" class="java.math.BigDecimal"/>
	<parameter name="SUM_TOTAL" forPrompting="false" class="java.math.BigDecimal"/>
	<parameter name="RESPONSAVEL" class="com.zetra.econsig.helper.seguranca.AcessoSistema"/>
	<query language="sql"><![CDATA[SELECT DISTINCT tb_usuario.usu_codigo,tb_usuario.usu_login,tb_usuario.usu_nome,tb_usuario.stu_codigo,tb_usuario.usu_tipo_bloq,tb_perfil.per_codigo,tb_perfil.per_descricao,tb_usuario.usu_data_cad,tb_usuario.usu_data_exp_senha,IF(tb_usuario.usu_codigo = tb_usuario_cse.usu_codigo, 'CSE', (IF(tb_usuario.usu_codigo = tb_usuario_csa.usu_codigo, 'CSA', (IF(tb_usuario.usu_codigo = tb_usuario_cor.usu_codigo, 'COR', 'ORG'))))) AS TIPO,IF(tb_usuario.usu_codigo = tb_usuario_cse.usu_codigo, tb_consignante.cse_nome, (IF(tb_usuario.usu_codigo = tb_usuario_csa.usu_codigo, tb_consignataria.csa_nome, (IF(tb_usuario.usu_codigo = tb_usuario_cor.usu_codigo, CONCAT(CONCAT(CSA_COR.csa_nome,  ' - '  ), tb_correspondente.cor_nome), tb_orgao.org_nome))))) AS ENTIDADE FROM tb_usuario LEFT OUTER JOIN tb_usuario_cse ON (tb_usuario.usu_codigo = tb_usuario_cse.usu_codigo) LEFT OUTER JOIN tb_consignante ON (tb_usuario_cse.cse_codigo = tb_consignante.cse_codigo) LEFT OUTER JOIN tb_usuario_csa ON (tb_usuario.usu_codigo = tb_usuario_csa.usu_codigo) LEFT OUTER JOIN tb_consignataria ON (tb_usuario_csa.csa_codigo = tb_consignataria.csa_codigo) LEFT OUTER JOIN tb_usuario_cor ON (tb_usuario.usu_codigo = tb_usuario_cor.usu_codigo) LEFT OUTER JOIN tb_correspondente ON (tb_usuario_cor.cor_codigo = tb_correspondente.cor_codigo) LEFT OUTER JOIN tb_consignataria CSA_COR ON (tb_correspondente.csa_codigo = CSA_COR.csa_codigo) LEFT OUTER JOIN tb_usuario_org ON (tb_usuario.usu_codigo = tb_usuario_org.usu_codigo) LEFT OUTER JOIN tb_orgao ON (tb_usuario_org.org_codigo = tb_orgao.org_codigo) LEFT OUTER JOIN tb_perfil_usuario ON (tb_perfil_usuario.usu_codigo = tb_usuario.usu_codigo) LEFT OUTER JOIN tb_perfil ON (tb_perfil.per_codigo = tb_perfil_usuario.per_codigo) WHERE (tb_usuario.usu_codigo = tb_usuario_cse.usu_codigo OR tb_usuario.usu_codigo = tb_usuario_csa.usu_codigo OR tb_usuario.usu_codigo = tb_usuario_cor.usu_codigo OR tb_usuario.usu_codigo = tb_usuario_org.usu_codigo) AND ( tb_usuario_org.usu_codigo = tb_usuario.usu_codigo OR  tb_usuario_cse.usu_codigo = tb_usuario.usu_codigo OR  tb_usuario_csa.usu_codigo = tb_usuario.usu_codigo OR  tb_usuario_cor.usu_codigo = tb_usuario.usu_codigo )  AND tb_usuario.stu_codigo IN ( 1,2 ) ORDER BY  TIPO, tb_usuario.usu_nome]]></query>
	<background splitType="Stretch"/>
	<title splitType="Stretch"/>
	<pageHeader height="88" splitType="Stretch">
		<element kind="image" uuid="fd9c3976-ddab-4a47-b549-764bc5b67e84" key="image-1" x="2" y="1" width="63" height="20" onErrorType="Blank" usingCache="true" lazy="true">
			<expression><![CDATA[$P{CAMINHO_LOGO}]]></expression>
			<box>
				<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				<bottomPen lineWidth="0.0" lineColor="#000000"/>
				<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
			</box>
		</element>
		<element kind="textField" uuid="02475424-f8fe-48c6-ba14-1c4137f60d1a" key="textField-1" x="2" y="21" width="533" height="67" fontName="Arial" evaluationTime="Report" pattern="" blankWhenNull="true" bold="false" hTextAlign="Left">
			<expression><![CDATA[$P{SUBTITULO}]]></expression>
			<box>
				<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				<bottomPen lineWidth="0.0" lineColor="#000000"/>
				<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
			</box>
		</element>
		<element kind="textField" uuid="eb9b57eb-5dfd-4208-9987-9e3b3dc41220" key="textField-2" x="68" y="1" width="467" height="20" fontName="Arial" fontSize="12.0" evaluationTime="Report" pattern="" blankWhenNull="false" bold="true" hTextAlign="Left">
			<expression><![CDATA[$P{TITULO}]]></expression>
			<box>
				<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				<bottomPen lineWidth="0.0" lineColor="#000000"/>
				<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
			</box>
		</element>
	</pageHeader>
	<columnHeader splitType="Stretch"/>
	<detail>
		<band height="137" splitType="Stretch">
			<element kind="break" uuid="8a73de7e-66b7-4d40-a4f4-07580e4b8ff3" key="element-1" positionType="Float" mode="Transparent" x="0" y="45" width="535" height="1"/>
			<element kind="subreport" uuid="3d0c6e5b-76eb-4696-94d7-c95ac6558fa4" key="subreport-1" positionType="Float" mode="Transparent" x="2" y="21" width="533" height="24" usingCache="true">
				<dataSourceExpression><![CDATA[new net.sf.jasperreports.engine.data.JRBeanCollectionDataSource($P{PERC_CARTEIRA_QTDE})]]></dataSourceExpression>
				<expression><![CDATA[$P{SUBREPORT_DIR} + "PercentualCarteiraQuantidade.jasper"]]></expression>
				<parameter name="CSA_CODIGO">
					<expression><![CDATA[$P{CSA_CODIGO}]]></expression>
				</parameter>
				<parameter name="SUM_QTDE">
					<expression><![CDATA[$P{SUM_QTDE}]]></expression>
				</parameter>
			</element>
			<element kind="subreport" uuid="7b6d5877-7b7e-4961-9e4c-3f01b7e1b350" key="subreport-2" positionType="Float" mode="Transparent" x="2" y="66" width="533" height="24" usingCache="true">
				<dataSourceExpression><![CDATA[new net.sf.jasperreports.engine.data.JRBeanCollectionDataSource($P{PERC_CARTEIRA_PARCELA})]]></dataSourceExpression>
				<expression><![CDATA[$P{SUBREPORT_DIR} + "PercentualCarteiraParcela.jasper"]]></expression>
				<parameter name="CSA_CODIGO">
					<expression><![CDATA[$P{CSA_CODIGO}]]></expression>
				</parameter>
				<parameter name="SUM_PARCELA">
					<expression><![CDATA[$P{SUM_PARCELA}]]></expression>
				</parameter>
			</element>
			<element kind="break" uuid="456d8d07-22c0-4a18-91d7-2059ab3eed98" key="element-2" positionType="Float" mode="Transparent" x="0" y="90" width="535" height="1"/>
			<element kind="textField" uuid="cd440fc9-b0bc-4ce4-bb04-62d453d5e28e" key="staticText-3" mode="Transparent" x="3" y="93" width="376" height="16" markup="none" fontName="Arial" fontSize="10.0" bold="true">
				<expression><![CDATA[com.zetra.econsig.helper.texto.ApplicationResourcesHelper.getMessage("rotulo.relatorio.percentualcarteira.total.titulo", $P{RESPONSAVEL})]]></expression>
			</element>
			<element kind="subreport" uuid="19c0d14f-1bf7-43b3-afd4-a10618071b0d" key="subreport-3" positionType="Float" mode="Transparent" x="2" y="112" width="533" height="24" usingCache="true">
				<dataSourceExpression><![CDATA[new net.sf.jasperreports.engine.data.JRBeanCollectionDataSource($P{PERC_CARTEIRA_TOTAL})]]></dataSourceExpression>
				<expression><![CDATA[$P{SUBREPORT_DIR} + "PercentualCarteiraTotal.jasper"]]></expression>
				<parameter name="CSA_CODIGO">
					<expression><![CDATA[$P{CSA_CODIGO}]]></expression>
				</parameter>
				<parameter name="SUM_TOTAL">
					<expression><![CDATA[$P{SUM_TOTAL}]]></expression>
				</parameter>
			</element>
			<element kind="textField" uuid="40545068-8131-473e-97d2-3ad838d31880" key="staticText-4" mode="Transparent" x="4" y="48" width="376" height="16" markup="none" fontName="Arial" fontSize="10.0" bold="true">
				<expression><![CDATA[com.zetra.econsig.helper.texto.ApplicationResourcesHelper.getMessage("rotulo.relatorio.percentualcarteira.parcela.titulo", $P{RESPONSAVEL})]]></expression>
			</element>
			<element kind="textField" uuid="8507dc67-3fc2-4da1-86e3-fc1850bf0120" key="staticText-5" mode="Transparent" x="4" y="2" width="376" height="16" markup="none" fontName="Arial" fontSize="10.0" bold="true">
				<expression><![CDATA[com.zetra.econsig.helper.texto.ApplicationResourcesHelper.getMessage("rotulo.relatorio.percentualcarteira.quantidade.titulo", $P{RESPONSAVEL})]]></expression>
			</element>
		</band>
	</detail>
	<columnFooter splitType="Stretch"/>
	<pageFooter height="27" splitType="Stretch">
		<element kind="textField" uuid="bae5ff73-c541-403b-b117-bfae5ecbf534" key="textField" x="1" y="0" width="534" height="13" fontName="Times New Roman" fontSize="7.0" pattern="" blankWhenNull="true">
			<expression><![CDATA[$P{TEXTO_RODAPE}]]></expression>
			<box>
				<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				<bottomPen lineWidth="0.0" lineColor="#000000"/>
				<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
			</box>
		</element>
		<element kind="textField" uuid="c0764eb8-05cd-4243-8f95-9fb9a614be40" key="textField-3" x="428" y="13" width="60" height="13" blankWhenNull="false" hTextAlign="Right">
			<expression><![CDATA[com.zetra.econsig.helper.texto.ApplicationResourcesHelper.getMessage("rotulo.relatorio.pagina.de", $P{RESPONSAVEL}, $V{PAGE_NUMBER}.toString())]]></expression>
			<box>
				<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				<bottomPen lineWidth="0.0" lineColor="#000000"/>
				<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
			</box>
		</element>
		<element kind="textField" uuid="37e9deb2-5b4b-427f-bb05-b721a3a78105" key="textField-4" x="490" y="13" width="45" height="13" evaluationTime="Report" blankWhenNull="false" hTextAlign="Left">
			<expression><![CDATA[$V{PAGE_NUMBER}]]></expression>
			<box>
				<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				<bottomPen lineWidth="0.0" lineColor="#000000"/>
				<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
			</box>
		</element>
	</pageFooter>
	<summary splitType="Stretch"/>
</jasperReport>
